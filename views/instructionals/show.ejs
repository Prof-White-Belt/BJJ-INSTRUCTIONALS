<%- include("../partials/header.ejs") %>

<link rel="stylesheet" href="/stylesheet/show.css">

<div class="instructional-show-container">
  <div class="instructional-show-card">
    <img src="<%= instructional.thumbnailUrl %>" alt="<%= instructional.title %>" class="instructional-show-img" />

    <div class="instructional-show-details">
      <h1><%= instructional.title %></h1>
      <p><strong>Instructor:</strong> <%= instructional.instructor %></p>
      <p><strong>Price:</strong> $<%= instructional.price.toFixed(2) %></p>

      <!-- ðŸŽ¯ Watch Now button that opens YouTube in a new tab -->
      <a href="<%= instructional.videoUrl %>" class="watch-now-link" target="_blank" rel="noopener noreferrer">
        Watch Now
      </a>

      <% if (
        user &&
        user.favorites &&
        user.favorites.includes(instructional._id.toString())
      ) { %>
        <form method="POST" action="/users/<%= user._id %>/favorites/<%= instructional._id %>?_method=DELETE">
          <button type="submit" class="unfavorite-btn">Unfavorite</button>
        </form>
      <% } else if (user) { %>
        <form method="POST" action="/users/<%= user._id %>/favorites/<%= instructional._id %>">
          <button type="submit" class="favorite-btn">Favorite</button>
        </form>
      <% } %>
    </div>
  </div>
</div>

<%- include("../partials/footer.ejs") %>
<script>
  console.log("<%= instructional.videoUrl %>");
</script>
